<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RelatÃ³rios â€“ RH 1Âº BBM</title>
  <link rel="stylesheet" href="css/estilo.css">
  <!-- Biblioteca jsPDF para gerar PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    .mapa-card {
      background: white;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 25px;
      border-left: 5px solid var(--azul-bombeiro);
    }
    .mapa-titulo {
      font-weight: 700;
      color: var(--azul-marinho);
      margin-bottom: 15px;
      font-size: 1.2rem;
    }
    .btn-pdf {
      background: #d32f2f;
      color: white;
    }
    .btn-pdf:hover {
      background: #b71c1c;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo-container">
      <img src="https://ciabm-1bbm.github.io/site/logo-cbmrs.png" alt="CBMRS" class="logo" onerror="this.style.display='none'">
      <img src="https://ciabm-1bbm.github.io/site/brasao-rs.png" alt="RS" class="logo" onerror="this.style.display='none'">
      <img src="https://ciabm-1bbm.github.io/site/brasao-1bbm.png" alt="1Âº BBM" class="logo" onerror="this.style.display='none'">
    </div>
    <div class="titulo-sistema">
      ğŸš’ SISTEMA RH â€“ 1Âº BBM
    </div>
    <div>
      <button class="btn btn-primary" onclick="window.location.href='index.html'">ğŸ  Dashboard</button>
    </div>
  </div>

  <h2 style="color: var(--azul-marinho); margin: 20px 0;">ğŸ“„ MAPAS E RELATÃ“RIOS â€“ JANEIRO/2026</h2>

  <!-- Card Resumo de CÃ¡lculos -->
  <div class="mapa-card">
    <div class="mapa-titulo">ğŸ“Š RESUMO DO MÃŠS</div>
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;" id="resumo-mensal">
      <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
        <div style="font-size: 0.8rem; color: #555;">TOTAL HE</div>
        <div style="font-size: 1.8rem; font-weight: 700; color: var(--azul-marinho);" id="resumo-he">0h</div>
      </div>
      <div style="background: #e8f5e9; padding: 15px; border-radius: 8px;">
        <div style="font-size: 0.8rem; color: #555;">GSE</div>
        <div style="font-size: 1.8rem; font-weight: 700; color: var(--verde);" id="resumo-gse">R$ 0</div>
      </div>
      <div style="background: #fff3e0; padding: 15px; border-radius: 8px;">
        <div style="font-size: 0.8rem; color: #555;">ETAPAS</div>
        <div style="font-size: 1.8rem; font-weight: 700; color: #b76e1e;" id="resumo-etapas">0</div>
      </div>
      <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
        <div style="font-size: 0.8rem; color: #555;">VALOR ETAPAS</div>
        <div style="font-size: 1.8rem; font-weight: 700; color: #6a1b9a;" id="resumo-valor-etapas">R$ 0</div>
      </div>
    </div>
  </div>

  <!-- Anexo A â€“ Mapa de Pagamento GSE -->
  <div class="mapa-card" id="anexo-a">
    <div class="mapa-titulo">ğŸ“‹ ANEXO A â€“ Mapa de Pagamento de GratificaÃ§Ã£o por ServiÃ§o ExtraordinÃ¡rio</div>
    <div style="margin-bottom: 20px; padding: 15px; background: #f9f9f9; border-radius: 5px;">
      <pre style="font-family: monospace; white-space: pre-wrap;">
ESTADO DO RIO GRANDE DO SUL â€“ SSP â€“ CBMRS
1Âº BATALHÃƒO DE BOMBEIRO MILITAR

MAPA DE PAGAMENTO DE GRATIFICAÃ‡ÃƒO POR SERVIÃ‡O EXTRAORDINÃRIO
REFERENTE AO MÃŠS DE: JANEIRO 2026

1. Atesto a legalidade da despesa.
2. Proceda-se o pagamento.

Em: ____/____/______

[Nome do Comandante] â€“ Ten Cel QOEM â€“ Comandante do 1Âº BBM

--------------------------------------------------------
ID Func | Posto/Grad | Nome Completo | Horas Extras | Valor
--------------------------------------------------------
      </pre>
    </div>
    <button class="btn btn-pdf" onclick="gerarPDFanexoA()">
      ğŸ“„ GERAR PDF â€“ ANEXO A
    </button>
  </div>

  <!-- Anexo B â€“ Mapa de Escala Executada -->
  <div class="mapa-card">
    <div class="mapa-titulo">ğŸ“… ANEXO B â€“ Mapa de Escala de ServiÃ§o Executada</div>
    <button class="btn btn-pdf" onclick="gerarPDFanexoB()">
      ğŸ“„ GERAR PDF â€“ ANEXO B
    </button>
  </div>

  <!-- Anexo C â€“ Extrato Demonstrativo de Carga HorÃ¡ria -->
  <div class="mapa-card">
    <div class="mapa-titulo">ğŸ“Š ANEXO C â€“ Extrato Demonstrativo de Carga HorÃ¡ria</div>
    <button class="btn btn-pdf" onclick="gerarPDFanexoC()">
      ğŸ“„ GERAR PDF â€“ ANEXO C
    </button>
  </div>

  <!-- Anexo G â€“ Mapa de Saque de Etapas de AlimentaÃ§Ã£o -->
  <div class="mapa-card">
    <div class="mapa-titulo">ğŸ½ï¸ ANEXO G â€“ Mapa de Saque de Etapas de AlimentaÃ§Ã£o</div>
    <button class="btn btn-pdf" onclick="gerarPDFanexoG()">
      ğŸ“„ GERAR PDF â€“ ANEXO G
    </button>
  </div>

  <!-- Anexo H â€“ Mapa de Indisponibilidade -->
  <div class="mapa-card">
    <div class="mapa-titulo">ğŸŸ¡ ANEXO H â€“ Mapa de Indisponibilidade</div>
    <button class="btn btn-pdf" onclick="gerarPDFanexoH()">
      ğŸ“„ GERAR PDF â€“ ANEXO H
    </button>
  </div>

  <!-- Anexo I â€“ Justificativas para ExtensÃ£o de Jornada -->
  <div class="mapa-card">
    <div class="mapa-titulo">ğŸ“Œ ANEXO I â€“ Justificativas para ExtensÃ£o da Jornada Normal de Trabalho</div>
    <button class="btn btn-pdf" onclick="gerarPDFanexoI()">
      ğŸ“„ GERAR PDF â€“ ANEXO I
    </button>
  </div>

  <div class="rodape">
    <p>ğŸ“‹ InstruÃ§Ã£o Reguladora nÂº 003/Adm/Exc-20 â€“ Corpo de Bombeiros Militar do RS</p>
    <p>Â© 2026 1Âº BBM â€“ Sistema desenvolvido pela SeÃ§Ã£o de RH</p>
  </div>

  <script src="js/dados.js"></script>
  <script src="js/calculos.js"></script>
  <script src="js/pdf.js"></script>
  <script>
    window.onload = function() {
      // Carregar resumo do localStorage (gerado na pÃ¡gina escala)
      const resultado = JSON.parse(localStorage.getItem('resultado_he')) || {
        totalHE: '0',
        totalGSE: 0,
        totalEtapas: 0,
        totalValorEtapas: 0
      };
      
      document.getElementById('resumo-he').innerText = resultado.totalHE + 'h';
      document.getElementById('resumo-gse').innerText = 'R$ ' + resultado.totalGSE.toFixed(2);
      document.getElementById('resumo-etapas').innerText = resultado.totalEtapas;
      document.getElementById('resumo-valor-etapas').innerText = 'R$ ' + resultado.totalValorEtapas.toFixed(2);
    };
  </script>
</body>
</html>
